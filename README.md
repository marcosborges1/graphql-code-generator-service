# MicroGraphQL - GraphQL Code Generator Service

GraphQL Code Generator Service (GCGS) is the microservice responsible for generating GraphQL codes (schemas, queries and resolvers). To generate the codes, it receives as input the vectors of similarities generated by the API Similarity Analyzer Service. An example of a vector of similarities can be seen in Listing below, where there is originAPI, line 2, with its key information (api, url, method, input parameters, output parameters), lines 3 to 11. In the same way as the originAPI, the target API, line 13, has the same information from api to output parameters, lines 14 to 23.

```javascript
//GraphQL Schema Example
type ResutOrigin {
    X: String
    result: ResutTarget
}
type ResutTarget {
    id: Int
    username: String
}

//GraphQL Query Example
type Query {
    //<>
    OriginAPIGetParameterX(id:Int!):String!
    TargetAPIPostObjectYByX(X:String!):ResutTarget!
}

//GraphQL Resolver Example for Java Script
const resolvers = {
  Query: {
    OriginAPIGetParameterX: async (_, {
      id
    }, {
      dataSources
    }) => {
      return dataSources[i].originAPI.url(id);
    }
    TargetAPIPostObjectYByX: async (_, {
      X:String
    }, {
      dataSources
    }) => {
      return dataSources[i].targetAPI.url(X);
    }
  },
  ResutOrigin: {
    result: async ({
      X
    }, __, {
      dataSources
    }) => {
        return await dataSources[i].targetAPI.url(X);
    }
  }
}
```

## Note - Project Status

As it is a proof of concept, it is in a phase of improvement and evolution.

## Author

Marcos Borges

## Installation

Use the package manager [npm](https://www.npmjs.com) to install micrographlgateway.

```bash
npm install
```

## Usage

Before you start registering the microservices below, be sure to start them.

```javascript
//Ommited Details
const typeDefs = require("./graphql/schemas");
const resolvers = require("./graphql/resolvers");

const server = new ApolloServer({
	cors: true,
	typeDefs,
	resolvers,
	schema: buildSubgraphSchema([{ typeDefs, resolvers }]),
	plugins: [ApolloServerPluginLandingPageGraphQLPlayground()],
});

server.listen(4002).then(({ url }) => {
	console.log(`Server ready at ${url}`);
});
//Ommited Details
```

## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License

[MIT](https://choosealicense.com/licenses/mit/)
